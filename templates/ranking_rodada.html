<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Round Ranking</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="conteudo-centralizado">
    <header class="brand-header">
        <img class="brand-logo" src="{{ url_for('static', filename='imagens/Group 3.png') }}" alt="Cosmo Casa logo">
    </header>
    <div class="container-grande">
        <div class="toolbar-header">
            <h2>Participants Ranking</h2>
            <div class="toolbar-row">
                <a href="{{ url_for('missao.retry_modulos') }}" class="botao">Back to Modules</a>
            </div>
        </div>

        {% if ranking %}
        <div class="ranking-list">
            {% for item in ranking %}
            <div class="ranking-item">
                <div class="ranking-index-circle">{{ loop.index }}</div>
                <div style="flex:1">
                    <div style="font-size:1.05em;margin-bottom:6px;display:flex;align-items:center;gap:8px">
                        {% if loop.index == 1 %}
                            <span aria-label="1st place" title="1st place" class="ranking-medal">ðŸ¥‡</span>
                        {% elif loop.index == 2 %}
                            <span aria-label="2nd place" title="2nd place" class="ranking-medal">ðŸ¥ˆ</span>
                        {% elif loop.index == 3 %}
                            <span aria-label="3rd place" title="3rd place" class="ranking-medal">ðŸ¥‰</span>
                        {% endif %}
                        <strong>{{ item.nome }}</strong>
                    </div>
                    <div class="kpi-row">
                        <span>
                            <img src="{{ url_for('missao.icons', filename='cultura.svg') }}" alt="pontos" class="kpi-icon">
                            Points: <strong>{{ item.total }}</strong>
                        </span>
                        <span>
                            <img src="{{ url_for('missao.icons', filename='controle.svg') }}" alt="concluÃ­dos" class="kpi-icon">
                            Completed: {{ item.concluidos }}
                        </span>
                        <span>
                            <img src="{{ url_for('missao.icons', filename='robotica.svg') }}" alt="tentativas" class="kpi-icon">
                            Attempts: {{ item.tentativas }}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <p>No participants registered in this round.</p>
        {% endif %}
    </div>
</body>
</html>
